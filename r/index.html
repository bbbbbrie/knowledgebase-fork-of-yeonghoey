<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120656861-1"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'UA-120656861-1');
  </script>

  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="theme-color" content="#ffffff">

  <title>R</title>

  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>

  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>

  <link rel="stylesheet" href="/_css/content.css" />


  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->

  <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
</head>
<body>
<nav class="menu">
  <ol class="breadcrumb">
    <li><a href="/" >Home</a></li>
    <li>r</li>
  </ol>
</nav>

<article>
<header>
<h1 class="title">R</h1>
</header>

<nav class="toc">
<h2>Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#basics">Basics</a><ul>
<li><a href="#array-matrix">array, matrix</a></li>
<li><a href="#assign">assign</a></li>
<li><a href="#attr-attributes">attr, attributes</a></li>
<li><a href="#class-mode">class, mode</a></li>
<li><a href="#data.frame">data.frame</a></li>
<li><a href="#factor">factor</a></li>
<li><a href="#function">function</a></li>
<li><a href="#help">help</a></li>
<li><a href="#ifelse"><span>ifelse</span></a></li>
<li><a href="#length">length</a></li>
<li><a href="#list">list</a></li>
<li><a href="#na">NA</a></li>
<li><a href="#tapply">tapply</a></li>
<li><a href="#vector">vector</a></li>
</ul></li>
<li><a href="#probability-distributions">Probability distributions</a></li>
<li><a href="#statistical-models-in-r">Statistical models in R</a><ul>
<li><a href="#formula">formula</a></li>
<li><a href="#lm">lm</a></li>
</ul></li>
<li><a href="#graphical-procedures">Graphical procedures</a><ul>
<li><a href="#graphics-parameters-list">Graphics parameters list</a></li>
</ul></li>
<li><a href="#packages">Packages</a></li>
<li><a href="#topics">Topics</a><ul>
<li><a href="#oo-systems">OO Systems</a><ul>
<li><a href="#s3-object-system">S3 object system</a></li>
</ul></li>
<li><a href="#the-recycling-rule-of-mixed-vector-and-array-arithmetic">The Recycling Rule of Mixed vector and array arithmetic</a></li>
<li><a href="#rscript-vs-r-cmd-batch"><code>Rscript</code> vs <code>R CMD BATCH</code></a></li>
</ul></li>
<li><a href="#how-to">How-to</a><ul>
<li><a href="#format-numeric-as-percent">Format numeric as percent</a></li>
<li><a href="#assert-conditions">Assert conditions</a></li>
<li><a href="#order-factor-elements">Order factor elements</a></li>
<li><a href="#remove-na-values-from-a-vector">Remove NA values from a vector</a></li>
</ul></li>
</ul>
</nav>

<h1 id="overview">Overview</h1>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://www.povertyactionlab.org/sites/default/files/r-cheat-sheet.pdf" class="uri">https://www.povertyactionlab.org/sites/default/files/r-cheat-sheet.pdf</a></li>
</ul>
</div>
<p><img src="https://media.yeonghoey.com/r/_img/5637cbaf157434e607527184d848dc7331c0e47a.png" /></p>
<p><img src="https://media.yeonghoey.com/r/_img/ab67ab3c388482a32d5d4c2233894820336e10e5.png" /></p>
<p><img src="https://media.yeonghoey.com/r/_img/65cfcd62cc5c4d4e46cb7518a3c54b55e5d85275.png" /></p>
<p><img src="https://media.yeonghoey.com/r/_img/285cad1c433f2ed8c3590c443ec1e5a42798410f.png" /></p>
<h1 id="basics">Basics</h1>
<ul>
<li>R is case sensitive</li>
<li>Symbols: <code>[A-Za-z][.0-9A-Za-z_]*</code> or <code>[.]([A-Za-z][.0-9A-Za-z_]*)?</code></li>
<li><code>character</code> can be expressed by <code>'foo</code> or <code>&quot;foo&quot;</code> . Usually <code>&quot;foo&quot;</code> is preferred.</li>
<li>Commands are separated either by a semi-colon(<code>;</code>) or by a newline(<code>\n</code>).</li>
<li>Commands can be grouped by braces(<code>{}</code>)</li>
<li>Comments can be put almost everywhere, staring with <code>#</code></li>
</ul>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#R-commands_002c-case-sensitivity_002c-etc_002e" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#R-commands_002c-case-sensitivity_002c-etc_002e</a></li>
</ul>
</div>
<h2 id="array-matrix">array, matrix</h2>
<ul>
<li>a multiply subscripted collection of data entries</li>
</ul>
<div class="sourceCode" id="cb1" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">dim</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">x</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">array</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre class="example"><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
</code></pre>
<div class="sourceCode" id="cb3" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">y =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">z =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">cbind</span>(x, y, z)                      <span class="co"># column named are bound as their variable name</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw">cbind</span>(<span class="dt">col1 =</span> x, <span class="dt">col2 =</span> y, <span class="dt">col3 =</span> z) <span class="co"># specify column names explicitly</span></a></code></pre></div>
<pre class="example"><code>     x  y   z
[1,] 1 10 100
[2,] 2 20 200
[3,] 3 30 300
     col1 col2 col3
[1,]    1   10  100
[2,]    2   20  200
[3,]    3   30  300
</code></pre>
<div class="sourceCode" id="cb5" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">x</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">i &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">3</span><span class="op">:</span><span class="dv">1</span>), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">x[i] <span class="co"># === c(x[1, 3], x[2, 2], x[3, 1])</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">x[i] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">x</a></code></pre></div>
<pre class="example"><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
[1] 7 5 3
     [,1] [,2] [,3]
[1,]    1    4    0
[2,]    2    0    8
[3,]    0    6    9
</code></pre>
<div class="sourceCode" id="cb7" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">A &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">B &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">A <span class="op">*</span><span class="st"> </span>B     <span class="co"># element-wise product</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">A <span class="op">%*%</span><span class="st"> </span>B   <span class="co"># matrix product</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw">solve</span>(A)  <span class="co"># inverse</span></a></code></pre></div>
<pre class="example"><code>     [,1] [,2]
[1,]    4    6
[2,]    6    4
     [,1] [,2]
[1,]   13    5
[2,]   20    8
     [,1] [,2]
[1,]   -2  1.5
[2,]    1 -0.5
</code></pre>
<div class="sourceCode" id="cb9" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">A &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co"># To vector</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">as.vector</span>(A)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">c</span>(A)</a></code></pre></div>
<pre class="example"><code>[1] 1 2 3 4
[1] 1 2 3 4
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Arrays-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Arrays-1</a></li>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#The-concatenation-function_002c-c_0028_0029_002c-with-arrays" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#The-concatenation-function_002c-c_0028_0029_002c-with-arrays</a></li>
</ul>
</div>
<h2 id="assign">assign</h2>
<div class="sourceCode" id="cb11" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># following lines are all the same</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="dv">0</span> -&gt;<span class="st"> </span>x</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">x =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw">assign</span>(<span class="st">&quot;x&quot;</span>, <span class="dv">0</span>)</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Vectors-and-assignment-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Vectors-and-assignment-1</a></li>
</ul>
</div>
<h2 id="attr-attributes">attr, attributes</h2>
<div class="sourceCode" id="cb12" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">attributes</span>(z)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">attr</span>(z, <span class="st">&quot;dim&quot;</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">z</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw">attr</span>(z, <span class="st">&quot;dim&quot;</span>) &lt;-<span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6">z</a></code></pre></div>
<pre class="example"><code>$dim
[1] 3 3

[1] 3 3
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    0    0    0
[1] 0 0 0 0 0 0 0 0 0
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Getting-and-setting-attributes-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Getting-and-setting-attributes-1</a></li>
</ul>
</div>
<h2 id="class-mode">class, mode</h2>
<ul>
<li><code>class</code> is similar to the class from other languages</li>
<li><code>mode</code> is a kind of <em>atomic types</em></li>
</ul>
<div class="sourceCode" id="cb14" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">class</span>(x)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="kw">unclass</span>(x)  <span class="co"># remove temporarily the effects of class</span></a></code></pre></div>
<pre class="example"><code>[1] &quot;numeric&quot;
NULL
[1] 10
</code></pre>
<div class="sourceCode" id="cb16" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">mode</span>(<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">mode</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">mode</span>(1i)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">mode</span>(<span class="st">&quot;foo&quot;</span>)</a></code></pre></div>
<pre class="example"><code>[1] &quot;logical&quot;
[1] &quot;numeric&quot;
[1] &quot;complex&quot;
[1] &quot;character&quot;
</code></pre>
<pre class="example"><code>&gt; mean
function (x, ...)
UseMethod(&quot;mean&quot;)
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Intrinsic-attributes_003a-mode-and-length" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Intrinsic-attributes_003a-mode-and-length</a></li>
</ul>
</div>
<h2 id="data.frame">data.frame</h2>
<p>A kind of <code>list</code> but:</p>
<ul>
<li>The components must be vectors (numeric, character, or logical), factors, numeric matrices, lists, or other data frames.</li>
<li>Matrices, lists, and data frames provide as many variables to the new data frame as they have columns, elements, or variables, respectively.</li>
<li>Numeric vectors, logicals and factors are included as is, and by default18 character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.</li>
<li>Vector structures appearing as variables of the data frame must all have the same length, and matrix structures must all have the same row size.</li>
</ul>
<div class="sourceCode" id="cb19" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">class</span>(<span class="kw">data.frame</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">mode</span>(<span class="kw">data.frame</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a></code></pre></div>
<pre class="example"><code>[1] &quot;data.frame&quot;
[1] &quot;list&quot;
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Data-frames-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Data-frames-1</a></li>
</ul>
</div>
<h2 id="factor">factor</h2>
<ul>
<li>R provides both ordered and unordered factors.</li>
</ul>
<div class="sourceCode" id="cb21" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">sz &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;XL&quot;</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">sz1 &lt;-<span class="st"> </span><span class="kw">factor</span>(sz)  <span class="co"># Levels are sorted by alphabetical order by default</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3">sz1</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">sz2 &lt;-<span class="st"> </span><span class="kw">factor</span>(sz, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;XL&quot;</span>))</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">sz2</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">sz3 &lt;-<span class="st"> </span><span class="kw">factor</span>(sz, <span class="dt">ordered =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">sz3</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="kw">levels</span>(sz1)</a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="kw">levels</span>(sz2)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="kw">table</span>(sz2)  <span class="co"># a contingency table of the counts</span></a></code></pre></div>
<pre class="example"><code>[1] M  L  S  XL
Levels: L M S XL
[1] M  L  S  XL
Levels: S M L XL
[1] M  L  S  XL
Levels: L M S XL
[1] &quot;L&quot;  &quot;M&quot;  &quot;S&quot;  &quot;XL&quot;
[1] &quot;S&quot;  &quot;M&quot;  &quot;L&quot;  &quot;XL&quot;
sz2
 S  M  L XL 
 1  1  1  1 
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Ordered-and-unordered-factors" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Ordered-and-unordered-factors</a></li>
</ul>
</div>
<h2 id="function">function</h2>
<ul>
<li>any ordinary assignments done within the function are local and temporary and are lost after exit from the function</li>
</ul>
<div class="sourceCode" id="cb23" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># define new binary operator</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">&quot;%!%&quot;</span> &lt;-<span class="st"> </span><span class="cf">function</span>(X, y) { … }</a></code></pre></div>
<div class="sourceCode" id="cb24" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">fun1 &lt;-<span class="st"> </span><span class="cf">function</span>(data, data.frame, graph, limit) {</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">  [<span class="cf">function</span> body omitted]</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">ans &lt;-<span class="st"> </span><span class="kw">fun1</span>(d, df, <span class="ot">TRUE</span>, <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">ans &lt;-<span class="st"> </span><span class="kw">fun1</span>(d, df, <span class="dt">graph=</span><span class="ot">TRUE</span>, <span class="dt">limit=</span><span class="dv">20</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">ans &lt;-<span class="st"> </span><span class="kw">fun1</span>(<span class="dt">data=</span>d, <span class="dt">limit=</span><span class="dv">20</span>, <span class="dt">graph=</span><span class="ot">TRUE</span>, <span class="dt">data.frame=</span>df)</a></code></pre></div>
<div class="sourceCode" id="cb25" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">x =</span> <span class="dv">100</span>) {</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">  <span class="kw">c</span>(..., x)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">foo</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-5" data-line-number="5"><span class="kw">foo</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">x =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-6" data-line-number="6"></a>
<a class="sourceLine" id="cb25-7" data-line-number="7">bar &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">  <span class="kw">c</span>(..<span class="dv">1</span>, ..<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb25-10" data-line-number="10"><span class="kw">bar</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre class="example"><code>[1]   1   2   3 100
[1] 1 2 3
[1] 1 3
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Writing-your-own-functions-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Writing-your-own-functions-1</a></li>
</ul>
</div>
<h2 id="help">help</h2>
<div class="sourceCode" id="cb27" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">help</span>(solve)         <span class="co"># same as ?solve</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">help</span>(<span class="st">&quot;[[&quot;</span>)          <span class="co"># about the syntax of [[</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw">help.start</span>()        <span class="co"># show help main page</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="kw">help.search</span>(solve)  <span class="co"># same as ??solve</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="kw">example</span>(solve)      <span class="co"># run the examples in the help page</span></a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Getting-help-with-functions-and-features" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Getting-help-with-functions-and-features</a></li>
</ul>
</div>
<h2 id="ifelse"><a href="https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/ifelse">ifelse</a></h2>
<h2 id="length">length</h2>
<div class="sourceCode" id="cb28" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">numeric</span>()</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">x[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3">x</a></code></pre></div>
<pre class="example"><code>[1] NA NA  5
[1] 3
</code></pre>
<div class="sourceCode" id="cb30" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="kw">length</span>(x) &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3">x</a></code></pre></div>
<pre class="example"><code>[1] 1 2
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Changing-the-length-of-an-object-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Changing-the-length-of-an-object-1</a></li>
</ul>
</div>
<h2 id="list">list</h2>
<div class="sourceCode" id="cb32" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">family &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">name=</span><span class="st">&quot;Fred&quot;</span>, <span class="dt">wife=</span><span class="st">&quot;Mary&quot;</span>, <span class="dt">no.children=</span><span class="dv">3</span>, <span class="dt">child.ages=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">9</span>))</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">family<span class="op">$</span>name</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">family[[<span class="st">&quot;wife&quot;</span>]]  <span class="co"># element</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4">family[<span class="st">&quot;wife&quot;</span>]    <span class="co"># sublist</span></a></code></pre></div>
<pre class="example"><code>[1] &quot;Fred&quot;
[1] &quot;Mary&quot;
</code></pre>
<div class="sourceCode" id="cb34" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">x[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">x</a></code></pre></div>
<pre class="example"><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] 4

</code></pre>
<div class="sourceCode" id="cb36" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="kw">c</span>(x, y)  <span class="co"># concat</span></a></code></pre></div>
<pre class="example"><code>[[1]]
[1] &quot;a&quot;

[[2]]
[1] &quot;b&quot;

[[3]]
[1] &quot;x&quot;

[[4]]
[1] &quot;y&quot;

</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Lists-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Lists-1</a></li>
</ul>
</div>
<h2 id="na">NA</h2>
<ul>
<li>Stands for Not Available</li>
<li>Most functions have <code>na.rm</code> parameter that excludes <code>NA</code> when it's <code>TRUE</code></li>
</ul>
<div class="sourceCode" id="cb38" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">is.na</span>(x)</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<h2 id="tapply">tapply</h2>
<ul>
<li>Apply a function to each cell of a ragged array</li>
<li>The combination of a vector and a labelling factor is an example of what is sometimes called a ragged array since the subclass sizes are possibly irregular.</li>
</ul>
<div class="sourceCode" id="cb39" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="kw">tapply</span>(x, y, mean)</a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="kw">tapply</span>(x, y, length)</a></code></pre></div>
<pre class="example"><code>a b c 
2 3 5 
a b c 
2 2 1 
</code></pre>
<h2 id="vector">vector</h2>
<div class="sourceCode" id="cb41" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">4</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">5</span> <span class="op">^</span><span class="st"> </span><span class="dv">6</span>)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="kw">sqrt</span>(a)</a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="kw">exp</span>(a)</a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="kw">log</span>(a)</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb41-7" data-line-number="7">b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>)</a>
<a class="sourceLine" id="cb41-8" data-line-number="8"><span class="co"># shows warninging: not a multiple of shorter one</span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9">a <span class="op">+</span><span class="st"> </span>b</a></code></pre></div>
<div class="sourceCode" id="cb42" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">mean</span>(x)</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw">median</span>(x)</a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="kw">quantile</span>(x)</a>
<a class="sourceLine" id="cb42-4" data-line-number="4"><span class="kw">min</span>(x)</a>
<a class="sourceLine" id="cb42-5" data-line-number="5"><span class="kw">max</span>(x)</a>
<a class="sourceLine" id="cb42-6" data-line-number="6"><span class="kw">range</span>(x)  <span class="co"># c(min(x), max(x))</span></a>
<a class="sourceLine" id="cb42-7" data-line-number="7"><span class="kw">var</span>(x)</a>
<a class="sourceLine" id="cb42-8" data-line-number="8"><span class="kw">sd</span>(x)</a></code></pre></div>
<div class="sourceCode" id="cb43" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="dv">3</span><span class="op">:</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dt">by =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="kw">rep</span>(<span class="dv">0</span>, <span class="dt">times =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre class="example"><code>[1] 1 2 3
[1] 3 2 1
[1] 1 2 3
[1] 0 0 0
</code></pre>
<div class="sourceCode" id="cb45" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">n &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="dv">1</span><span class="op">:</span>n<span class="dv">-1</span>    <span class="co"># === 1:3 - 1</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="dv">1</span><span class="op">:</span>(n<span class="dv">-1</span>)  <span class="co"># === 1:2</span></a></code></pre></div>
<pre class="example"><code>[1] 0 1 2
[1] 1 2
</code></pre>
<div class="sourceCode" id="cb47" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>]</a></code></pre></div>
<pre class="example"><code>[1] FALSE FALSE FALSE  TRUE  TRUE
[1] 4 5
</code></pre>
<div class="sourceCode" id="cb49" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">x[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb49-2" data-line-number="2">x[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb49-3" data-line-number="3">x[<span class="op">-</span><span class="dv">2</span>]      <span class="co"># everything except the 2nd element</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4">x[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]     <span class="co"># 1st - 3rd elements</span></a>
<a class="sourceLine" id="cb49-5" data-line-number="5">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)] <span class="co"># 1st, and 4th elements</span></a>
<a class="sourceLine" id="cb49-6" data-line-number="6"></a>
<a class="sourceLine" id="cb49-7" data-line-number="7">z =<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb49-8" data-line-number="8">x[z]  <span class="co"># corresponding TRUE elements</span></a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Simple-manipulations_003b-numbers-and-vectors" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Simple-manipulations_003b-numbers-and-vectors</a></li>
<li><a href="https://www.cyclismo.org/tutorial/R/basicOps.html" class="uri">https://www.cyclismo.org/tutorial/R/basicOps.html</a></li>
</ul>
</div>
<h1 id="probability-distributions">Probability distributions</h1>
<table>
<thead>
<tr class="header">
<th>Distribution</th>
<th>R name</th>
<th>additional arguments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>beta</td>
<td>beta</td>
<td>shape1, shape2, ncp</td>
</tr>
<tr class="even">
<td>binomial</td>
<td>binom</td>
<td>size, prob</td>
</tr>
<tr class="odd">
<td>Cauchy</td>
<td>cauchy</td>
<td>location, scale</td>
</tr>
<tr class="even">
<td>chi-squared</td>
<td>chisq</td>
<td>df, ncp</td>
</tr>
<tr class="odd">
<td>exponential</td>
<td>exp</td>
<td>rate</td>
</tr>
<tr class="even">
<td>F</td>
<td>f</td>
<td>df1, df2, ncp</td>
</tr>
<tr class="odd">
<td>gamma</td>
<td>gamma</td>
<td>shape, scale</td>
</tr>
<tr class="even">
<td>geometric</td>
<td>geom</td>
<td>prob</td>
</tr>
<tr class="odd">
<td>hypergeometric</td>
<td>hyper</td>
<td>m, n, k</td>
</tr>
<tr class="even">
<td>log-normal</td>
<td>lnorm</td>
<td>meanlog, sdlog</td>
</tr>
<tr class="odd">
<td>logistic</td>
<td>logis</td>
<td>location, scale</td>
</tr>
<tr class="even">
<td>negative binomial</td>
<td>nbinom</td>
<td>size, prob</td>
</tr>
<tr class="odd">
<td>normal</td>
<td>norm</td>
<td>mean, sd</td>
</tr>
<tr class="even">
<td>Poisson</td>
<td>pois</td>
<td>lambda</td>
</tr>
<tr class="odd">
<td>signed rank</td>
<td>signrank</td>
<td>n</td>
</tr>
<tr class="even">
<td>Student’s t</td>
<td>t</td>
<td>df, ncp</td>
</tr>
<tr class="odd">
<td>uniform</td>
<td>unif</td>
<td>min, max</td>
</tr>
<tr class="even">
<td>Weibull</td>
<td>weibull</td>
<td>shape, scale</td>
</tr>
<tr class="odd">
<td>Wilcoxon</td>
<td>wilcox</td>
<td>m, n</td>
</tr>
</tbody>
</table>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Probability-distributions-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Probability-distributions-1</a></li>
</ul>
</div>
<h1 id="statistical-models-in-r">Statistical models in R</h1>
<hr />
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Statistical-models-in-R-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Statistical-models-in-R-1</a></li>
</ul>
<h2 id="formula">formula</h2>
<p>The operator <code>~</code> is used to define a model formula in R.</p>
<pre class="example"><code>response ~ op_1 term_1 op_2 term_2 op_3 term_3 …
</code></pre>
<dl>
<dt>response</dt>
<dd>is a vector or matrix, (or expression evaluating to a vector or matrix) defining the response variable(s).
</dd>
<dt>op<sub>i</sub></dt>
<dd>is an operator, either <code>+</code> or <code>-</code>, implying the inclusion or exclusion of a term in the model, (the first is optional).
</dd>
<dt>term<sub>i</sub></dt>
<dd><p>is either</p>
<ul>
<li>a vector or matrix expression, or <code>1</code>,</li>
<li>a factor, or</li>
<li>a formula expression consisting of factors, vectors or matrices connected by formula operators.</li>
</ul>
<p>In all cases each term defines a collection of columns either to be added to or removed from the model matrix.</p>
</dd>
</dl>
<p>Notations:</p>
<dl>
<dt><code>Y ~ M</code></dt>
<dd><code>Y</code> is modeled as <code>M</code>.
</dd>
<dt><code>M_1 + M_2</code></dt>
<dd>Include <code>M_1</code> and <code>M_2</code>.
</dd>
<dt><code>M_1 - M_2</code></dt>
<dd>Include <code>M_1</code> leaving out terms of <code>M_2</code>.
</dd>
<dt><code>M_1 : M_2</code></dt>
<dd>The tensor product of <code>M_1</code> and <code>M_2</code>. If both terms are factors, then the “subclasses” factor.
</dd>
<dt><code>M_1 %in% M_2</code></dt>
<dd>Similar to <code>M_1:M_2</code>, but with a different coding.
</dd>
<dt><code>M_1 * M_2</code></dt>
<dd><code>M_1 + M_2 + M_1:M_2</code>.
</dd>
<dt><code>M_1 / M_2</code></dt>
<dd><code>M_1 + M_2 %in% M_1</code>.
</dd>
<dt><code>M^n</code></dt>
<dd>All terms in <code>M</code> together with “interactions” up to order <code>n</code>
</dd>
<dt><code>I(M)</code></dt>
<dd>Insulate <code>M</code>. Inside <code>M</code> all operators have their normal arithmetic meaning, and that term appears in the model matrix.
</dd>
</dl>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Defining-statistical-models_003b-formulae" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Defining-statistical-models_003b-formulae</a></li>
</ul>
</div>
<h2 id="lm">lm</h2>
<dl>
<dt><code>anova(object_1, object_2)</code></dt>
<dd>Compare a submodel with an outer model and produce an analysis of variance table.
</dd>
<dt><code>coef(object)</code></dt>
<dd>Extract the regression coefficient (matrix). Long form: <code>coefficients(object)</code>.
</dd>
<dt><code>deviance(object)</code></dt>
<dd>Residual sum of squares, weighted if appropriate.
</dd>
<dt><code>formula(object)</code></dt>
<dd>Extract the model formula.
</dd>
<dt><code>plot(object)</code></dt>
<dd>Produce four plots, showing residuals, fitted values and some diagnostics.
</dd>
<dt><a href="https://www.rdocumentation.org/packages/stats/versions/3.5.0/topics/predict.lm">predict(object, newdata=data.frame)</a></dt>
<dd>The data frame supplied must have variables specified with the same labels as the original. The value is a vector or matrix of predicted values corresponding to the determining variable values in <code>data.frame</code>.
</dd>
<dt><code>print(object)</code></dt>
<dd>Print a concise version of the object. Most often used implicitly.
</dd>
<dt><code>residuals(object)</code></dt>
<dd>Extract the (matrix of) residuals, weighted as appropriate. Short form: <code>resid(object)</code>.
</dd>
<dt><code>step(object)</code></dt>
<dd>Select a suitable model by adding or dropping terms and preserving hierarchies. The model with the smallest value of AIC (Akaike’s An Information Criterion) discovered in the stepwise search is returned.
</dd>
<dt><code>summary(object)</code></dt>
<dd>Print a comprehensive summary of the results of the regression analysis.
</dd>
<dt><code>vcov(object)</code></dt>
<dd>Returns the variance-covariance matrix of the main parameters of a fitted model object.
</dd>
</dl>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Linear-models-1" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Linear-models-1</a></li>
</ul>
</div>
<h1 id="graphical-procedures">Graphical procedures</h1>
<div class="sourceCode" id="cb51" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">plot</span>(x, y)</a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="kw">plot</span>(xy)</a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="kw">plot</span>(x)</a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="kw">plot</span>(f)</a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="kw">plot</span>(f, y)</a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="kw">plot</span>(df)</a>
<a class="sourceLine" id="cb51-7" data-line-number="7"><span class="kw">plot</span>(<span class="op">~</span><span class="st"> </span>expr)</a>
<a class="sourceLine" id="cb51-8" data-line-number="8"><span class="kw">plot</span>(y <span class="op">~</span><span class="st"> </span>expr)</a>
<a class="sourceLine" id="cb51-9" data-line-number="9"><span class="kw">qqnorm</span>(x)</a>
<a class="sourceLine" id="cb51-10" data-line-number="10"><span class="kw">qqline</span>(x)</a>
<a class="sourceLine" id="cb51-11" data-line-number="11"><span class="kw">qqplot</span>(x, y)</a>
<a class="sourceLine" id="cb51-12" data-line-number="12"><span class="kw">hist</span>(x)</a>
<a class="sourceLine" id="cb51-13" data-line-number="13"><span class="kw">hist</span>(x, <span class="dt">nclass=</span>n)</a>
<a class="sourceLine" id="cb51-14" data-line-number="14"><span class="kw">hist</span>(x, <span class="dt">breaks=</span>b, …)</a>
<a class="sourceLine" id="cb51-15" data-line-number="15"><span class="kw">dotchart</span>(x, …)</a>
<a class="sourceLine" id="cb51-16" data-line-number="16"><span class="kw">image</span>(x, y, z, …)</a>
<a class="sourceLine" id="cb51-17" data-line-number="17"><span class="kw">contour</span>(x, y, z, …)</a>
<a class="sourceLine" id="cb51-18" data-line-number="18"><span class="kw">persp</span>(x, y, z, …)</a></code></pre></div>
<div class="sourceCode" id="cb52" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw">points</span>(x, y)</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="kw">lines</span>(x, y)</a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="kw">text</span>(x, y, labels, …)</a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="kw">abline</span>(a, b)</a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="kw">abline</span>(<span class="dt">h=</span>y)</a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="kw">abline</span>(<span class="dt">v=</span>x)</a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="kw">abline</span>(lm.obj)</a>
<a class="sourceLine" id="cb52-8" data-line-number="8"><span class="kw">polygon</span>(x, y, …)</a>
<a class="sourceLine" id="cb52-9" data-line-number="9"><span class="kw">legend</span>(x, y, legend, …)</a>
<a class="sourceLine" id="cb52-10" data-line-number="10"><span class="kw">title</span>(main, sub)</a>
<a class="sourceLine" id="cb52-11" data-line-number="11"><span class="kw">axis</span>(side, …)</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Graphics" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Graphics</a></li>
</ul>
</div>
<h2 id="graphics-parameters-list">Graphics parameters list</h2>
<div class="sourceCode" id="cb53" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">par</span>()  <span class="co"># graphics parameters</span></a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">par</span>(<span class="kw">c</span>(<span class="st">&quot;col&quot;</span>, <span class="st">&quot;lty&quot;</span>))</a>
<a class="sourceLine" id="cb53-3" data-line-number="3"><span class="kw">par</span>(<span class="dt">col=</span><span class="dv">4</span>, <span class="dt">lty=</span><span class="dv">2</span>)</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Graphics-parameters-list" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Graphics-parameters-list</a></li>
</ul>
</div>
<h1 id="packages">Packages</h1>
<div class="sourceCode" id="cb54" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">library</span>()      <span class="co"># which packages are installed?</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="kw">library</span>(boot)  <span class="co"># load &#39;boot&#39; package</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3"></a>
<a class="sourceLine" id="cb54-4" data-line-number="4"><span class="kw">search</span>()            <span class="co"># which packages are currently loaded?</span></a>
<a class="sourceLine" id="cb54-5" data-line-number="5"><span class="kw">loadedNamespaces</span>()</a></code></pre></div>
<p>Packages have namespaces:</p>
<div class="sourceCode" id="cb55" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">base<span class="op">::</span>t   <span class="co"># access &#39;t&#39; in base</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2">base<span class="op">:::</span>t  <span class="co"># access hidden &#39;t&#39; in base</span></a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Packages" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Packages</a></li>
</ul>
</div>
<h1 id="topics">Topics</h1>
<h2 id="oo-systems">OO Systems</h2>
<dl>
<dt>S3</dt>
<dd><ul>
<li><code>drawRect(canvas, &quot;blue&quot;)</code> dispatches the method call to <code>drawRect.canvas(&quot;blue&quot;)</code></li>
</ul>
<div class="sourceCode" id="cb56" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">methods</span>(print) <span class="co"># list all the sub methods like &#39;print.lm&#39;, etc.</span></a></code></pre></div>
</dd>
<dt>S4</dt>
<dd><ul>
<li>similar to S3, but is more formal.</li>
</ul>
</dd>
<dt>Reference classes</dt>
<dd><ul>
<li>RC for short.</li>
<li>like message-passing OO</li>
<li>Looks like <code>canvas$drawRect(&quot;blue&quot;)</code></li>
</ul>
</dd>
</dl>
<p>Currently S3 is the most popular one.</p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/6583265/what-does-s3-methods-mean-in-r" class="uri">https://stackoverflow.com/questions/6583265/what-does-s3-methods-mean-in-r</a></li>
<li><a href="http://adv-r.had.co.nz/OO-essentials.html" class="uri">http://adv-r.had.co.nz/OO-essentials.html</a></li>
</ul>
</div>
<h3 id="s3-object-system">S3 object system</h3>
<div class="sourceCode" id="cb57" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="kw">attr</span>(x, <span class="st">&quot;class&quot;</span>) &lt;-<span class="st"> &quot;foo&quot;</span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3">x</a>
<a class="sourceLine" id="cb57-4" data-line-number="4"></a>
<a class="sourceLine" id="cb57-5" data-line-number="5"><span class="co"># Or in one line</span></a>
<a class="sourceLine" id="cb57-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="st">&quot;foo&quot;</span>)</a>
<a class="sourceLine" id="cb57-7" data-line-number="7">x</a>
<a class="sourceLine" id="cb57-8" data-line-number="8"></a>
<a class="sourceLine" id="cb57-9" data-line-number="9"><span class="co"># Or</span></a>
<a class="sourceLine" id="cb57-10" data-line-number="10"><span class="kw">class</span>(x) &lt;-<span class="st"> &quot;foo&quot;</span></a>
<a class="sourceLine" id="cb57-11" data-line-number="11"><span class="kw">class</span>(x)</a></code></pre></div>
<pre class="example"><code>[1] 1
attr(,&quot;class&quot;)
[1] &quot;foo&quot;
[1] 1
attr(,&quot;class&quot;)
[1] &quot;foo&quot;
[1] &quot;foo&quot;
</code></pre>
<div class="sourceCode" id="cb59" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">mean &lt;-<span class="st"> </span><span class="cf">function</span> (x, ...) {</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">  <span class="kw">UseMethod</span>(<span class="st">&quot;mean&quot;</span>, x)</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb59-4" data-line-number="4"></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="co"># Methods are ordinary functions that use a special naming convention: &#39;generic.class&#39;:</span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6">mean.numeric &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) <span class="kw">sum</span>(x) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb59-7" data-line-number="7">mean.data.frame &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) <span class="kw">sapply</span>(x, mean, ...)</a>
<a class="sourceLine" id="cb59-8" data-line-number="8">mean.matrix &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) <span class="kw">apply</span>(x, <span class="dv">2</span>, mean)</a></code></pre></div>
<div class="sourceCode" id="cb60" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="st">&quot;foo&quot;</span>)</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">bar &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">UseMethod</span>(<span class="st">&quot;bar&quot;</span>, x)</a>
<a class="sourceLine" id="cb60-3" data-line-number="3">bar.foo &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4"><span class="kw">bar</span>(x)</a></code></pre></div>
<pre class="example"><code>[1] &quot;hello&quot;
</code></pre>
<ul>
<li>There are internal generics, methods implemented in C.</li>
<li>Internal generic have a slightly different dispatch mechanism to other generic functions:
<ul>
<li>Before trying the <code>default</code> method, they will also try dispatching on the mode of an object</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb62" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="kw">as.list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>), <span class="dt">class =</span> <span class="st">&quot;myclass&quot;</span>)</a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="kw">length</span>(x)  <span class="co"># this works even though there is no &#39;length.default&#39;</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="co"># [1] 10</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4"></a>
<a class="sourceLine" id="cb62-5" data-line-number="5">mylength &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">UseMethod</span>(<span class="st">&quot;mylength&quot;</span>, x)</a>
<a class="sourceLine" id="cb62-6" data-line-number="6">mylength.list &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb62-7" data-line-number="7"><span class="kw">mylength</span>(x)</a>
<a class="sourceLine" id="cb62-8" data-line-number="8"><span class="co"># Error in UseMethod(&quot;mylength&quot;, x) :</span></a>
<a class="sourceLine" id="cb62-9" data-line-number="9"><span class="co">#  no applicable method for &#39;mylength&#39; applied to an object of class</span></a>
<a class="sourceLine" id="cb62-10" data-line-number="10"><span class="co">#  &quot;myclass&quot;</span></a></code></pre></div>
<p>Here is how inheritance works:</p>
<div class="sourceCode" id="cb63" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">baz &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">UseMethod</span>(<span class="st">&quot;baz&quot;</span>, x)</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">baz.A &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="st">&quot;A&quot;</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3">baz.B &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="st">&quot;B&quot;</span></a>
<a class="sourceLine" id="cb63-4" data-line-number="4"></a>
<a class="sourceLine" id="cb63-5" data-line-number="5">ab &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb63-6" data-line-number="6">ba &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="kw">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>))</a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="kw">baz</span>(ab)</a>
<a class="sourceLine" id="cb63-8" data-line-number="8"><span class="kw">baz</span>(ba)</a>
<a class="sourceLine" id="cb63-9" data-line-number="9"></a>
<a class="sourceLine" id="cb63-10" data-line-number="10">baz.C &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">c</span>(<span class="st">&quot;C&quot;</span>, <span class="kw">NextMethod</span>())</a>
<a class="sourceLine" id="cb63-11" data-line-number="11">ca &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="kw">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>))</a>
<a class="sourceLine" id="cb63-12" data-line-number="12">cb &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="kw">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb63-13" data-line-number="13"><span class="kw">baz</span>(ca)</a>
<a class="sourceLine" id="cb63-14" data-line-number="14"><span class="kw">baz</span>(cb)</a></code></pre></div>
<pre class="example"><code>[1] &quot;A&quot;
[1] &quot;B&quot;
[1] &quot;C&quot; &quot;A&quot;
[1] &quot;C&quot; &quot;B&quot;
</code></pre>
<div class="sourceCode" id="cb65" data-org-language="R" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">baz &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">UseMethod</span>(<span class="st">&quot;baz&quot;</span>, x)</a>
<a class="sourceLine" id="cb65-2" data-line-number="2">baz.A &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">  <span class="kw">print</span>(<span class="kw">c</span>(.Generic, <span class="st">&quot;(A)&quot;</span>, .Class))</a>
<a class="sourceLine" id="cb65-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb65-5" data-line-number="5">baz.B &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb65-6" data-line-number="6">  <span class="kw">print</span>(<span class="kw">c</span>(.Generic, <span class="st">&quot;(B)&quot;</span>, .Class))</a>
<a class="sourceLine" id="cb65-7" data-line-number="7">  <span class="kw">NextMethod</span>()</a>
<a class="sourceLine" id="cb65-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb65-9" data-line-number="9">ba &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">class =</span> <span class="kw">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>))</a>
<a class="sourceLine" id="cb65-10" data-line-number="10"><span class="kw">baz</span>(ba)</a></code></pre></div>
<pre class="example"><code>[1] &quot;baz&quot; &quot;(B)&quot; &quot;B&quot;   &quot;A&quot;  
[1] &quot;baz&quot; &quot;(A)&quot; &quot;A&quot;  
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="http://adv-r.had.co.nz/S3.html" class="uri">http://adv-r.had.co.nz/S3.html</a></li>
</ul>
</div>
<h2 id="the-recycling-rule-of-mixed-vector-and-array-arithmetic">The Recycling Rule of Mixed vector and array arithmetic</h2>
<ul>
<li>The expression is scanned from left to right.</li>
<li>Any short vector operands are extended by recycling their values until they match the size of any other operands.</li>
<li>As long as short vectors and arrays only are encountered, the arrays must all have the same dim attribute or an error results.</li>
<li>Any vector operand longer than a matrix or array operand generates an error.</li>
<li>If array structures are present and no error or coercion to vector has been precipitated, the result is an array structure with the common dim attribute of its array operands.</li>
</ul>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Mixed-vector-and-array-arithmetic_002e-The-recycling-rule" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Mixed-vector-and-array-arithmetic_002e-The-recycling-rule</a></li>
</ul>
</div>
<h2 id="rscript-vs-r-cmd-batch"><code>Rscript</code> vs <code>R CMD BATCH</code></h2>
<p>Use <code>Rscript</code>. Details:</p>
<dl>
<dt><code>Rscript</code></dt>
<dd><ul>
<li>does NOT echo</li>
<li>output to stdout</li>
<li>can be used in one-liner (i.e. with no input file)</li>
</ul>
</dd>
<dt><code>littler</code></dt>
<dd><ul>
<li>all that Rscript does</li>
<li>can read commands from stdin (useful for pipelining)</li>
<li>faster startup time</li>
<li>load the methods package</li>
</ul>
</dd>
<dt><code>R CMD BATCH</code></dt>
<dd><ul>
<li>echo the input statements</li>
<li>can not output to stdout</li>
</ul>
</dd>
</dl>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/21969145/why-or-when-is-rscript-or-littler-better-than-r-cmd-batch" class="uri">https://stackoverflow.com/questions/21969145/why-or-when-is-rscript-or-littler-better-than-r-cmd-batch</a></li>
</ul>
</div>
<h1 id="how-to">How-to</h1>
<h2 id="format-numeric-as-percent">Format numeric as percent</h2>
<div class="sourceCode" id="cb67" data-org-language="R" data-session="yes" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">scales<span class="op">::</span><span class="kw">percent</span>(<span class="fl">0.95</span>)</a></code></pre></div>
<pre class="example"><code>[1] &quot;95%&quot;
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/7145826/how-to-format-a-number-as-percentage-in-r" class="uri">https://stackoverflow.com/questions/7145826/how-to-format-a-number-as-percentage-in-r</a></li>
</ul>
</div>
<h2 id="assert-conditions">Assert conditions</h2>
<p>Use <code>stopifnot()</code>.</p>
<div class="sourceCode" id="cb69" data-org-language="R" data-session="yes" data-results="output" data-exports="both"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">stopifnot</span>(<span class="ot">FALSE</span>)</a></code></pre></div>
<pre class="example"><code>Error: FALSE is not TRUE
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/2233584/does-r-have-an-assert-statement-as-in-python" class="uri">https://stackoverflow.com/questions/2233584/does-r-have-an-assert-statement-as-in-python</a></li>
</ul>
</div>
<h2 id="order-factor-elements">Order factor elements</h2>
<div class="sourceCode" id="cb71" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>mydata<span class="op">$</span>Treatment</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">[<span class="dv">1</span>] L M H L M H</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">Levels<span class="op">:</span><span class="st"> </span>H L M</a>
<a class="sourceLine" id="cb71-4" data-line-number="4"></a>
<a class="sourceLine" id="cb71-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.integer</span>(mydata<span class="op">$</span>Treatment)</a>
<a class="sourceLine" id="cb71-6" data-line-number="6">[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">3</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb71-7" data-line-number="7"></a>
<a class="sourceLine" id="cb71-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="kw">factor</span>(mydata<span class="op">$</span>Treatment,<span class="kw">c</span>(<span class="st">&quot;L&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;H&quot;</span>))</a>
<a class="sourceLine" id="cb71-9" data-line-number="9">[<span class="dv">1</span>] L M H L M H                               <span class="co"># &lt;-- not changed</span></a>
<a class="sourceLine" id="cb71-10" data-line-number="10">Levels<span class="op">:</span><span class="st"> </span>L M H                                 <span class="co"># &lt;-- changed</span></a>
<a class="sourceLine" id="cb71-11" data-line-number="11"></a>
<a class="sourceLine" id="cb71-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.integer</span>(<span class="kw">factor</span>(mydata<span class="op">$</span>Treatment,<span class="kw">c</span>(<span class="st">&quot;L&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;H&quot;</span>)))</a>
<a class="sourceLine" id="cb71-13" data-line-number="13">[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>                               <span class="co"># &lt;-- changed</span></a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/4260698/r-ordering-in-boxplot" class="uri">https://stackoverflow.com/questions/4260698/r-ordering-in-boxplot</a></li>
</ul>
</div>
<h2 id="remove-na-values-from-a-vector">Remove NA values from a vector</h2>
<ul>
<li>Most functions working with vectors have <code>na.rm</code> boolean parameter.</li>
<li>When <code>na.rm</code> is <code>TRUE</code>, the functions filter <code>NA</code></li>
<li>Otherwise, <code>d &lt;- d[!is.na(d)]</code></li>
</ul>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://stackoverflow.com/questions/7706876/remove-na-values-from-a-vector" class="uri">https://stackoverflow.com/questions/7706876/remove-na-values-from-a-vector</a></li>
</ul>
</div>
</article>

</body>
</html>
