#+TITLE: Linux Process Concepts

* Table of Contents :TOC_2_gh:
- [[#process-groups-sessions-and-controlling-terminal][Process Groups, Sessions and Controlling Terminal]]
  - [[#process-group][Process Group]]
  - [[#session][Session]]
  - [[#references][References]]
- [[#zombie-and-orphan-process][Zombie and Orphan Process]]
- [[#double-fork][Double Fork]]
- [[#terminal][Terminal]]
  - [[#what-happens-when-you-press-ctrlc][What happens when you press ~Ctrl+C~]]
  - [[#pseudo-terminals][Pseudo Terminals]]

* Process Groups, Sessions and Controlling Terminal

[[file:_img/screenshot_2018-04-01_17-33-25.png]]

** Process Group
- A collection of processes that *permits the signaling of related processes*.
- A newly created process joins the process group of its creator.
- When shells like ~bash~ run a command, it forks and call ~setpgid()~ to allocate a new process group,
  and make it the foreground process group if the shell was in foreground. [[https://unix.stackexchange.com/questions/363126/why-is-process-not-part-of-expected-process-group][stackexchange]] [[http://kirste.userpage.fu-berlin.de/chemnet/use/info/libc/libc_24.html][ref]]

** Session
- *A collection of process groups*
- When attached to a terminal,
  - The terminal is now called as a controlling terminal
  - The session now has the foreground process group, which associated and interacts with the terminal

*** [[https://linux.die.net/man/2/setsid][setsid]]
The calling process is 
- the leader of the new session
- the process group leader of the new process group
- has no controlling terminal.

** References
- https://www.andrew.cmu.edu/course/15-412/ln/412springlecture3.html
- https://stackoverflow.com/questions/6548823/use-and-meaning-of-session-and-process-group-in-unix
- http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap11.html

* Zombie and Orphan Process
* Double Fork
* Terminal
** What happens when you press ~Ctrl+C~
** Pseudo Terminals
:REFERENCES:
- https://www.quora.com/What-is-the-purpose-of-a-pseudo-tty
:END:

As an example, ~ssh~ works as follows:
- ~ssh <host>~ ::
  connect to ~host~ and allocate a ~pty~ (pseudo terminal).
- ~ssh <host> <cmd>~ ::
  Just let ~host~ run ~<cmd>~, since it generally doesn't need to allocate ~pty~.
- ~ssh <host> tmux~ ::
  commands like ~tmux~ or ~screen~ need ~pty~ to work properly, but the default won't do this.
  In this case, specify ~-t~ to explicitly allocate ~pty~ for the command.
