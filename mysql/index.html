<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120656861-1"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'UA-120656861-1');
  </script>

  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="theme-color" content="#ffffff">

  <title>MySQL</title>

  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>

  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>

  <link rel="stylesheet" href="/_css/content.css" />


  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->

  <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
</head>
<body>
<nav class="menu">
  <ol class="breadcrumb">
    <li><a href="/" >Home</a></li>
    <li>mysql</li>
  </ol>
</nav>

<article>
<header>
<h1 class="title">MySQL</h1>
</header>

<nav class="toc">
<h2>Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#cli">CLI</a></li>
<li><a href="#select">SELECT</a></li>
<li><a href="#insertupdate">INSERT/UPDATE</a></li>
<li><a href="#show">SHOW</a></li>
<li><a href="#database">DATABASE</a></li>
<li><a href="#table">TABLE</a></li>
<li><a href="#types">TYPES</a></li>
<li><a href="#key">KEY</a></li>
<li><a href="#view">VIEW</a></li>
<li><a href="#grantrevoke">GRANT/REVOKE</a></li>
</ul></li>
<li><a href="#reference">Reference</a><ul>
<li><a href="#drop-table">DROP TABLE</a></li>
</ul></li>
<li><a href="#topics">Topics</a><ul>
<li><a href="#database-schema">Database? Schema?</a></li>
<li><a href="#datetime-vs-timestamp">DATETIME vs TIMESTAMP</a></li>
<li><a href="#foreign-key-constraint">Foreign key constraint</a></li>
</ul></li>
<li><a href="#how-to">How-to</a></li>
<li><a href="#links">Links</a></li>
</ul>
</nav>

<h1 id="overview">Overview</h1>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://en.wikibooks.org/wiki/MySQL/CheatSheet" class="uri">https://en.wikibooks.org/wiki/MySQL/CheatSheet</a></li>
</ul>
</div>
<h2 id="cli">CLI</h2>
<pre class="shell"><code>mysql -h &lt;host&gt; -u &lt;user&gt; -p&lt;passwd&gt;
mysql -h &lt;host&gt; -u &lt;user&gt; -p
Enter password: ********
mysql -h &lt;host&gt; -u &lt;user&gt; -p &lt;Database&gt;

mysql -u &lt;user&gt; -p
mysql -u &lt;user&gt; -p -e &quot;select * from schema.table&quot;

# load data
mysql database &lt; filename-20120201.sql
cat filename-20120201.sql | mysql database

# repair tables
mysqlcheck --all-databases
mysqlcheck --all-databases --fast
</code></pre>
<div class="REFERENCES drawer">
<ul>
<li><a href="http://stackoverflow.com/questions/1602904/how-do-you-run-a-single-query-through-mysql-from-the-command-line" class="uri">http://stackoverflow.com/questions/1602904/how-do-you-run-a-single-query-through-mysql-from-the-command-line</a></li>
</ul>
</div>
<h2 id="select">SELECT</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">SELECT</span> * <span class="kw">FROM</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">SELECT</span> * <span class="kw">FROM</span> table1, table2, ...</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">SELECT</span> field1, field2, ... <span class="kw">FROM</span> table1, table2, ...</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition <span class="kw">GROUP</span> <span class="kw">BY</span> field</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition <span class="kw">GROUP</span> <span class="kw">BY</span> field <span class="kw">HAVING</span> condition2</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition <span class="kw">ORDER</span> <span class="kw">BY</span> field1, field2</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition <span class="kw">ORDER</span> <span class="kw">BY</span> field1, field2 <span class="kw">DESC</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> ... <span class="kw">WHERE</span> condition <span class="kw">LIMIT</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> field1 <span class="kw">FROM</span> ...</a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> field1, field2 <span class="kw">FROM</span> ...</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> t1 <span class="kw">JOIN</span> t2 <span class="kw">ON</span> t1.id1 = t2.id2 <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> t1 <span class="kw">LEFT</span> <span class="kw">JOIN</span> t2 <span class="kw">ON</span> t1.id1 = t2.id2 <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> t1 <span class="kw">JOIN</span> (t2 <span class="kw">JOIN</span> t3 <span class="kw">ON</span> ...) <span class="kw">ON</span> ...</a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="kw">SELECT</span> ... <span class="kw">FROM</span> t1 <span class="kw">JOIN</span> t2 <span class="kw">USING</span>(<span class="kw">id</span>) <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">field1 = value1</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">field1 &lt;&gt; value1</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">field1 <span class="kw">LIKE</span> <span class="st">&#39;value _ %&#39;</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21">field1 <span class="kw">IS</span> <span class="kw">NULL</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22">field1 <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23">field1 <span class="kw">IN</span> (value1, value2)</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">field1 <span class="kw">NOT</span> <span class="kw">IN</span> (value1, value2)</a>
<a class="sourceLine" id="cb2-25" data-line-number="25">condition1 <span class="kw">AND</span> condition2</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">condition1 <span class="kw">OR</span> condition2</a></code></pre></div>
<h2 id="insertupdate">INSERT/UPDATE</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">INSERT</span> <span class="kw">INTO</span> table1 (field1, field2, ...) <span class="kw">VALUES</span> (value1, value2, ...)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">INSERT</span> table1 <span class="kw">SET</span> field1=value_1, field2=value_2 ...</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">LOAD <span class="kw">DATA</span> INFILE <span class="st">&#39;/tmp/mydata.txt&#39;</span> <span class="kw">INTO</span> <span class="kw">TABLE</span> table1</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">FIELDS TERMINATED <span class="kw">BY</span> <span class="st">&#39;,&#39;</span> OPTIONALLY ENCLOSED <span class="kw">BY</span> <span class="st">&#39;&quot;&#39;</span> ESCAPED <span class="kw">BY</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw">DELETE</span> <span class="kw">FROM</span> table1 / <span class="kw">TRUNCATE</span> table1</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw">DELETE</span> <span class="kw">FROM</span> table1 <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">-- join:</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">DELETE</span> <span class="kw">FROM</span> table1, table2 <span class="kw">WHERE</span> table1.id1 = table2.id2 <span class="kw">AND</span> condition</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="kw">UPDATE</span> table1 <span class="kw">SET</span> field1=new_value1 <span class="kw">WHERE</span> condition</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">-- join:</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="kw">UPDATE</span> table1, table2 <span class="kw">SET</span> field1=new_value1, field2=new_value2, ...</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw">WHERE</span> table1.id1 = table2.id2 <span class="kw">AND</span> condition</a></code></pre></div>
<h2 id="show">SHOW</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb4-1" data-line-number="1">SHOW DATABASES</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">SHOW <span class="kw">TABLES</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">SHOW FIELDS <span class="kw">FROM</span> <span class="kw">table</span> / SHOW <span class="kw">COLUMNS</span> <span class="kw">FROM</span> <span class="kw">table</span> / DESCRIBE <span class="kw">table</span> / <span class="kw">DESC</span> <span class="kw">table</span> / <span class="kw">EXPLAIN</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">SHOW <span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">SHOW <span class="kw">CREATE</span> <span class="kw">TRIGGER</span> <span class="kw">trigger</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">SHOW <span class="kw">TRIGGERS</span> <span class="kw">LIKE</span> <span class="st">&#39;%update%&#39;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">SHOW PROCESSLIST</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">KILL</span> process_number</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="kw">SELECT</span> table_name, table_rows <span class="kw">FROM</span> INFORMATION_SCHEMA.TABLES <span class="kw">WHERE</span> TABLE_SCHEMA = <span class="st">&#39;**yourdbname**&#39;</span>;</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">$ mysqlshow</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">$ mysqlshow <span class="kw">database</span></a></code></pre></div>
<h2 id="database">DATABASE</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">CREATE</span> <span class="kw">DATABASE</span> [<span class="kw">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span>] mabase [<span class="dt">CHARACTER</span> <span class="kw">SET</span> charset] [COLLATE collation]</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">DATABASE</span> mabase <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">DROP</span> <span class="kw">DATABASE</span> mabase</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">USE</span> mabase</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw">ALTER</span> <span class="kw">DATABASE</span> mabase <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8</a></code></pre></div>
<h2 id="table">TABLE</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field1 type1, field2 type2, ...)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field1 type1 unsigned <span class="kw">not</span> <span class="kw">null</span> auto_increment, field2 type2, ...)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field1 type1, field2 type2, ..., <span class="kw">INDEX</span> (field))</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field1 type1, field2 type2, ..., <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field1))</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (field1 type1, field2 type2, ..., <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field1, field2))</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw">CREATE</span> <span class="kw">TABLE</span> table1 (fk_field1 type1, field2 type2, ...,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (fk_field1) <span class="kw">REFERENCES</span> table2 (t2_fieldA)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    [<span class="kw">ON</span> <span class="kw">UPDATE</span>] [CASCADE|SET NULL|RESTRICT]</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    [<span class="kw">ON</span> <span class="kw">DELETE</span>] [CASCADE|SET NULL|RESTRICT])</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="kw">CREATE</span> <span class="kw">TABLE</span> table1 (fk_field1 type1, fk_field2 type2, ...,</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (fk_field1, fk_field2) <span class="kw">REFERENCES</span> table2 (t2_fieldA, t2_fieldB))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> (...)</a>
<a class="sourceLine" id="cb6-13" data-line-number="13"></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="kw">CREATE</span> <span class="kw">TABLE</span> new_tbl_name <span class="kw">LIKE</span> tbl_name</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">  [<span class="kw">SELECT</span> ... <span class="kw">FROM</span> tbl_name ...]</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> <span class="kw">table</span> (...)</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="kw">CREATE</span> <span class="kw">table</span> new_table_name <span class="kw">as</span> <span class="kw">SELECT</span> [ *|column1, column2 ] <span class="kw">FROM</span> table_name</a>
<a class="sourceLine" id="cb6-20" data-line-number="20"></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="kw">DROP</span> <span class="kw">TABLE</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="kw">DROP</span> <span class="kw">TABLE</span> <span class="kw">IF</span> <span class="kw">EXISTS</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="kw">DROP</span> <span class="kw">TABLE</span> table1, table2, ...</a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="kw">DROP</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> <span class="kw">table</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">MODIFY</span> field1 type1</a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">MODIFY</span> field1 type1 <span class="kw">NOT</span> <span class="kw">NULL</span> ...</a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">CHANGE</span> old_name_field1 new_name_field1 type1</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">CHANGE</span> old_name_field1 new_name_field1 type1 <span class="kw">NOT</span> <span class="kw">NULL</span> ...</a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ALTER</span> field1 <span class="kw">SET</span> <span class="kw">DEFAULT</span> ...</a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ALTER</span> field1 <span class="kw">DROP</span> <span class="kw">DEFAULT</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> new_name_field1 type1</a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> new_name_field1 type1 <span class="fu">FIRST</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> new_name_field1 type1 <span class="kw">AFTER</span> another_field</a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">DROP</span> field1</a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> <span class="kw">INDEX</span> (field);</a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field);</a>
<a class="sourceLine" id="cb6-38" data-line-number="38"></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">-- Change field order:</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">MODIFY</span> field1 type1 <span class="fu">FIRST</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">MODIFY</span> field1 type1 <span class="kw">AFTER</span> another_field</a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">CHANGE</span> old_name_field1 new_name_field1 type1 <span class="fu">FIRST</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">CHANGE</span> old_name_field1 new_name_field1 type1 <span class="kw">AFTER</span> another_field</a>
<a class="sourceLine" id="cb6-44" data-line-number="44"></a>
<a class="sourceLine" id="cb6-45" data-line-number="45"><span class="kw">ALTER</span> <span class="kw">TABLE</span> old_name <span class="kw">RENAME</span> new_name;</a></code></pre></div>
<h2 id="types">TYPES</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb7-1" data-line-number="1">TINYINT   (1o: <span class="dv">-127</span>+<span class="dv">128</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="dt">SMALLINT</span>  (2o: +-<span class="dv">65</span> <span class="dv">000</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">MEDIUMINT (3o: +-<span class="dv">16</span> <span class="dv">000</span> <span class="dv">000</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="dt">INT</span>       (4o: +-<span class="dv">2</span> <span class="dv">000</span> <span class="dv">000</span> <span class="dv">000</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">BIGINT    (8o: +-<span class="fl">9.10</span>^<span class="dv">18</span>)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">Precise interval: -(<span class="dv">2</span>^(<span class="dv">8</span>*N<span class="dv">-1</span>)) -&gt; (<span class="dv">2</span>^<span class="dv">8</span>*N)-<span class="dv">1</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">/!\ <span class="dt">INT</span>(<span class="dv">2</span>) = <span class="ot">&quot;2 digits displayed&quot;</span> <span class="co">-- NOT &quot;number with 2 digits max&quot;</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span> auto_increment <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="co">-- auto-counter for PK</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="dt">FLOAT</span>(M,D) <span class="dt">DOUBLE</span>(M,D) <span class="dt">FLOAT</span>(D=<span class="dv">0</span>-&gt;<span class="dv">53</span>)</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">/!\ <span class="dv">8</span>,<span class="dv">3</span> -&gt; <span class="dv">12345</span>,<span class="dv">678</span> <span class="co">-- NOT 12345678,123!</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="dt">TIME</span> (HH<span class="ch">:MM</span>) <span class="dt">YEAR</span> (AAAA) <span class="dt">DATE</span> (AAAA-MM-JJ) DATETIME (AAAA-MM-JJ HH<span class="ch">:MM</span>; années <span class="dv">1000</span>-&gt;<span class="dv">9999</span>)</a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="dt">TIMESTAMP</span> (<span class="kw">like</span> DATETIME, but <span class="dv">1970</span>-&gt;<span class="dv">2038</span>, compatible <span class="kw">with</span> Unix)</a>
<a class="sourceLine" id="cb7-16" data-line-number="16"></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="dt">VARCHAR</span> (single-line; explicit <span class="kw">size</span>)</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">TEXT (multi-lines; <span class="fu">max</span> size=<span class="dv">65535</span>)</a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="dt">BLOB</span> (binary; <span class="fu">max</span> size=<span class="dv">65535</span>)</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">Variants <span class="kw">for</span> TEXT<span class="ch">&amp;BLOB</span>: TINY (max=<span class="dv">255</span>) MEDIUM (max=~<span class="dv">16000</span>) <span class="dt">LONG</span> (max=4Go)</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">Ex: <span class="dt">VARCHAR</span>(<span class="dv">32</span>), TINYTEXT, LONGBLOB, MEDIUMTEXT</a>
<a class="sourceLine" id="cb7-22" data-line-number="22"></a>
<a class="sourceLine" id="cb7-23" data-line-number="23">ENUM (<span class="st">&#39;value1&#39;</span>, <span class="st">&#39;value2&#39;</span>, ...) <span class="co">-- (default NULL, or &#39;&#39; if NOT NULL)</span></a></code></pre></div>
<h2 id="key">KEY</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (..., <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field1, field2))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">table</span> (..., <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (field1, field2) <span class="kw">REFERENCES</span> table2 (t2_field1, t2_field2))</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field);</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="kw">ALTER</span> <span class="kw">TABLE</span> <span class="kw">table</span> <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> constraint_name <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (field, field2);</a></code></pre></div>
<h2 id="view">VIEW</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">CREATE</span> <span class="kw">VIEW</span> <span class="kw">view</span> <span class="kw">AS</span> <span class="kw">SELECT</span> ... <span class="kw">FROM</span> <span class="kw">table</span> <span class="kw">WHERE</span> ...</a></code></pre></div>
<h2 id="grantrevoke">GRANT/REVOKE</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;password&#39;</span>;</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> base.* <span class="kw">TO</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;password&#39;</span>;</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw">GRANT</span> <span class="kw">SELECT</span>, <span class="kw">INSERT</span>, <span class="kw">DELETE</span> <span class="kw">ON</span> base.* <span class="kw">TO</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;password&#39;</span>;</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw">REVOKE</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> base.* <span class="kw">FROM</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;host&#39;</span>; <span class="co">-- one permission only</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">REVOKE</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span>, <span class="kw">GRANT</span> <span class="kw">OPTION</span> <span class="kw">FROM</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;host&#39;</span>; <span class="co">-- all permissions</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="kw">SET</span> <span class="kw">PASSWORD</span> = <span class="kw">PASSWORD</span>(<span class="st">&#39;new_pass&#39;</span>)</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="kw">SET</span> <span class="kw">PASSWORD</span> <span class="kw">FOR</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;host&#39;</span> = <span class="kw">PASSWORD</span>(<span class="st">&#39;new_pass&#39;</span>)</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">SET</span> <span class="kw">PASSWORD</span> = OLD_PASSWORD(<span class="st">&#39;new_pass&#39;</span>)</a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="kw">DROP</span> <span class="fu">USER</span> <span class="st">&#39;user&#39;</span>@<span class="st">&#39;host&#39;</span></a></code></pre></div>
<h1 id="reference">Reference</h1>
<h2 id="drop-table">DROP TABLE</h2>
<ul>
<li><code>RESTRICT</code> and <code>CASCADE</code> are permitted to make porting easier. In MySQL 5.6, <strong>they do nothing</strong>.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">DROP</span> [<span class="kw">TEMPORARY</span>] <span class="kw">TABLE</span> [<span class="kw">IF</span> <span class="kw">EXISTS</span>]</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">    tbl_name [, tbl_name] ...</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">    [<span class="kw">RESTRICT</span> | <span class="kw">CASCADE</span>]</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.6/en/drop-table.html" class="uri">https://dev.mysql.com/doc/refman/5.6/en/drop-table.html</a></li>
</ul>
</div>
<h1 id="topics">Topics</h1>
<h2 id="database-schema">Database? Schema?</h2>
<ul>
<li><code>CREATE SCHEMA</code> is a synonym for <code>CREATE DATABASE</code></li>
<li>Most other database solutions make a distinction. Usually a <code>schema</code> is a collection of <code>tables</code> and a <code>database</code> is a collection of <code>schemas</code>.</li>
</ul>
<div class="REFERENCES drawer">
<ul>
<li><a href="http://stackoverflow.com/questions/11618277/difference-between-schema-database-in-mysql" class="uri">http://stackoverflow.com/questions/11618277/difference-between-schema-database-in-mysql</a></li>
</ul>
</div>
<h2 id="datetime-vs-timestamp">DATETIME vs TIMESTAMP</h2>
<table>
<thead>
<tr class="header">
<th><code>TIMESTAMP</code></th>
<th><code>DATETIME</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>4 bytes</td>
<td>8 bytes</td>
</tr>
<tr class="even">
<td>000-01-01 00:00:00 TO 9999-12-31 23:59:59</td>
<td>1970-01-01 00:00:01 UTC TO 2038-01-19 03:14:07 UTC</td>
</tr>
<tr class="odd">
<td>A specific point in time</td>
<td>A specific date and time in calender</td>
</tr>
<tr class="even">
<td>Mostly for logging</td>
<td>Mostly for domain data like reservation, reminder etc.</td>
</tr>
</tbody>
</table>
<div class="REFERENCES drawer">
<ul>
<li><a href="http://stackoverflow.com/questions/409286/should-i-use-field-datetime-or-timestamp" class="uri">http://stackoverflow.com/questions/409286/should-i-use-field-datetime-or-timestamp</a></li>
</ul>
</div>
<h2 id="foreign-key-constraint">Foreign key constraint</h2>
<ul>
<li>Dropping a table whose column is referenced as a foreign key by another table can fail</li>
<li><code>SET FOREIGN_KEY_CHECKS = 0;</code> to ignore the constraint</li>
<li>It's not recommended for a general use</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">-- Specify to check referential constraints</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">SET</span> FOREIGN_KEY_CHECKS = <span class="dv">1</span>;</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">-- Create a parent table</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw">CREATE</span> <span class="kw">TABLE</span> states</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">(</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">  abbr <span class="dt">CHAR</span>(<span class="dv">2</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb12-8" data-line-number="8">  name <span class="dt">VARCHAR</span>(<span class="dv">90</span>)</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">) ENGINE = InnoDB;</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="kw">CREATE</span> <span class="kw">TABLE</span> cities</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">(</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">  name <span class="dt">VARCHAR</span>(<span class="dv">90</span>),</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">  state <span class="dt">CHAR</span>(<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (state) <span class="kw">REFERENCES</span> states(abbr)</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">) ENGINE = InnoDB;</a>
<a class="sourceLine" id="cb12-17" data-line-number="17"></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">-- Try to insert a row to child table (corresponding rows does not exist in the parent table)</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="kw">INSERT</span> <span class="kw">INTO</span> cities <span class="kw">VALUES</span> (<span class="st">&#39;Boston&#39;</span>, <span class="st">&#39;MA&#39;</span>);</a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">-- ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails</span></a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">-- Do not check referential constraints</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">SET</span> FOREIGN_KEY_CHECKS = <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">-- Now we can insert row</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw">INSERT</span> <span class="kw">INTO</span> cities <span class="kw">VALUES</span> (<span class="st">&#39;Boston&#39;</span>, <span class="st">&#39;MA&#39;</span>);</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">-- Query OK, 1 row affected (0.03 sec)</span></a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="http://www.sqlines.com/mysql/set_foreign_key_checks" class="uri">http://www.sqlines.com/mysql/set_foreign_key_checks</a></li>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_foreign_key_checks" class="uri">https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_foreign_key_checks</a></li>
</ul>
</div>
<h1 id="how-to">How-to</h1>
<h1 id="links">Links</h1>
</article>

</body>
</html>
