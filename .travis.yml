language: python

python:
  - "3.6"

git:
  depth: 3
  lfs_skip_smudge: true

before_install:
  - wget https://github.com/jgm/pandoc/releases/download/2.2.1/pandoc-2.2.1-1-amd64.deb
  - sudo dpkg -i pandoc-2.2.1-1-amd64.deb
  - pip install pipenv

env:
  global:
    - MAKEFLAGS="-j 2"

install:
  - make init

script:
  - make build

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  local-dir: _site
  on:
    branch: master
