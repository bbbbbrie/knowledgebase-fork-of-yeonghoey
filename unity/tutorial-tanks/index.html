<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120656861-1"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'UA-120656861-1');
  </script>

  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="theme-color" content="#ffffff">

  <title>Tanks tutorial</title>

  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>

  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>

  <link rel="stylesheet" href="/_css/content.css" />


  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->

  <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
</head>
<body>
<nav class="menu">
  <ol class="breadcrumb">
    <li><a href="/" >Home</a></li>
    <li><a href="/unity/" >unity</a></li>
    <li>tutorial-tanks</li>
  </ol>
</nav>

<article>
<header>
<h1 class="title">Tanks tutorial</h1>
</header>

<nav class="toc">
<h2>Table of Contents</h2>
<ul>
<li><a href="#scene-setup">Scene Setup</a></li>
<li><a href="#tank-creation-control">Tank Creation &amp; Control</a></li>
<li><a href="#camera-control">Camera Control</a></li>
<li><a href="#tank-health">Tank Health</a></li>
<li><a href="#shell-creation">Shell Creation</a></li>
<li><a href="#firing-shells">Firing Shells</a></li>
<li><a href="#game-managers">Game Managers</a></li>
<li><a href="#audio-mixing">Audio Mixing</a></li>
</ul>
</nav>

<h1 id="scene-setup">Scene Setup</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-16-54.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-18-10.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-21-43.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-22-52.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-27-00.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-24-54.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-33-05.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-34-22.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-35-32.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/scene-setup?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/scene-setup?playlist=20081</a></li>
</ul>
</div>
<h1 id="tank-creation-control">Tank Creation &amp; Control</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-40-28.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-43-56.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-46-55.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-47-15.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-47-23.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-50-14.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-53-48.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-55-31.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_17-58-53.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-00-08.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-11-16.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-11-52.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-13-23.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-13-39.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-14-24.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-14-36.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-14-55.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-16-45.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-16-32.png" /></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">EngineAudio</span>()</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="co">// Play the correct audio clip based on whether or not the tank is moving and what audio is currently playing.</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    <span class="kw">if</span> (Mathf.<span class="fu">Abs</span> (m_MovementInputValue) &lt; <span class="fl">0.1f</span> &amp;&amp; Mathf.<span class="fu">Abs</span> (m_TurnInputValue) &lt; <span class="fl">0.1f</span>) {</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">      <span class="kw">if</span> (m_MovementAudio.<span class="fu">clip</span> == m_EngineDriving) {</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">        m_MovementAudio.<span class="fu">clip</span> = m_EngineIdling;</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">        m_MovementAudio.<span class="fu">pitch</span> = Random.<span class="fu">Range</span> (m_OriginalPitch - m_PitchRange, m_OriginalPitch + m_PitchRange);</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">        m_MovementAudio.<span class="fu">Play</span> ();</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">      }</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">      <span class="kw">if</span> (m_MovementAudio.<span class="fu">clip</span> == m_EngineIdling)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">      {</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">        m_MovementAudio.<span class="fu">clip</span> = m_EngineDriving;</a>
<a class="sourceLine" id="cb1-14" data-line-number="14">        m_MovementAudio.<span class="fu">pitch</span> = Random.<span class="fu">Range</span> (m_OriginalPitch - m_PitchRange, m_OriginalPitch + m_PitchRange);</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">        m_MovementAudio.<span class="fu">Play</span> ();</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">      }</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    }</a>
<a class="sourceLine" id="cb1-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb1-19" data-line-number="19"></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">FixedUpdate</span>()</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">{</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">    <span class="co">// Move and turn the tank.</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24">    <span class="fu">Move</span>();</a>
<a class="sourceLine" id="cb1-25" data-line-number="25">    <span class="fu">Turn</span> ();</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">}</a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">Move</span>()</a>
<a class="sourceLine" id="cb1-30" data-line-number="30">{</a>
<a class="sourceLine" id="cb1-31" data-line-number="31">    Vector3 movement = transform.<span class="fu">forward</span> * m_MovementInputValue * m_Speed * Time.<span class="fu">deltaTime</span>;</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">    m_Rigidbody.<span class="fu">MovePosition</span>(m_Rigidbody.<span class="fu">position</span> + movement);</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">}</a>
<a class="sourceLine" id="cb1-34" data-line-number="34"></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">Turn</span>()</a>
<a class="sourceLine" id="cb1-37" data-line-number="37">{</a>
<a class="sourceLine" id="cb1-38" data-line-number="38">    <span class="dt">float</span> turn = m_TurnInputValue * m_TurnSpeed * Time.<span class="fu">deltaTime</span>;</a>
<a class="sourceLine" id="cb1-39" data-line-number="39">    Quaternion turnRotation = Quaternion.<span class="fu">Euler</span> (0f, turn, 0f);</a>
<a class="sourceLine" id="cb1-40" data-line-number="40">    m_Rigidbody.<span class="fu">MoveRotation</span> (m_Rigidbody.<span class="fu">rotation</span> * turnRotation);</a>
<a class="sourceLine" id="cb1-41" data-line-number="41">}</a></code></pre></div>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-33-53.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-38-27.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/tank-creation-control?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/tank-creation-control?playlist=20081</a></li>
</ul>
</div>
<h1 id="camera-control">Camera Control</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-43-36.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-44-09.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-45-15.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-45-54.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-46-11.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-47-15.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-47-29.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-48-17.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-53-12.png" /></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb2-1" data-line-number="1">[HideInInspector] <span class="kw">public</span> Transform[] m_Targets; </a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">Move</span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="fu">FindAveragePosition</span>();</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    transform.<span class="fu">position</span> = Vector3.<span class="fu">SmoothDamp</span>(transform.<span class="fu">position</span>, m_DesiredPosition, <span class="kw">ref</span> m_MoveVelocity, m_DampTime);</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">FindAveragePosition</span>()</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">{</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    Vector3 averagePos = <span class="kw">new</span> <span class="fu">Vector3</span>();</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="dt">int</span> numTargets = <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; m_Targets.<span class="fu">Length</span>; i++)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">    {</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">        <span class="kw">if</span> (!m_Targets[i].<span class="fu">gameObject</span>.<span class="fu">activeSelf</span>)</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">            <span class="kw">continue</span>;</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">        averagePos += m_Targets[i].<span class="fu">position</span>;</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">        numTargets++;</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    }</a>
<a class="sourceLine" id="cb2-21" data-line-number="21"></a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    <span class="kw">if</span> (numTargets &gt; <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">        averagePos /= numTargets;</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">    averagePos.<span class="fu">y</span> = transform.<span class="fu">position</span>.<span class="fu">y</span>;</a>
<a class="sourceLine" id="cb2-25" data-line-number="25">    m_DesiredPosition = averagePos;</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">}</a></code></pre></div>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_18-57-14.png" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">Zoom</span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">float</span> requiredSize = <span class="fu">FindRequiredSize</span>();</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">    m_Camera.<span class="fu">orthographicSize</span> = Mathf.<span class="fu">SmoothDamp</span>(m_Camera.<span class="fu">orthographicSize</span>, requiredSize, <span class="kw">ref</span> m_ZoomSpeed, m_DampTime);</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw">private</span> <span class="dt">float</span> <span class="fu">FindRequiredSize</span>()</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">{</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">    Vector3 desiredLocalPos = transform.<span class="fu">InverseTransformPoint</span>(m_DesiredPosition);</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">    <span class="dt">float</span> size = 0f;</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; m_Targets.<span class="fu">Length</span>; i++)</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">    {</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">        <span class="kw">if</span> (!m_Targets[i].<span class="fu">gameObject</span>.<span class="fu">activeSelf</span>)</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">            <span class="kw">continue</span>;</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">        Vector3 targetLocalPos = transform.<span class="fu">InverseTransformPoint</span>(m_Targets[i].<span class="fu">position</span>);</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">        Vector3 desiredPosToTarget = targetLocalPos - desiredLocalPos;</a>
<a class="sourceLine" id="cb3-18" data-line-number="18">        size = Mathf.<span class="fu">Max</span> (size, Mathf.<span class="fu">Abs</span> (desiredPosToTarget.<span class="fu">y</span>));</a>
<a class="sourceLine" id="cb3-19" data-line-number="19">        size = Mathf.<span class="fu">Max</span> (size, Mathf.<span class="fu">Abs</span> (desiredPosToTarget.<span class="fu">x</span>) / m_Camera.<span class="fu">aspect</span>);</a>
<a class="sourceLine" id="cb3-20" data-line-number="20">    }</a>
<a class="sourceLine" id="cb3-21" data-line-number="21">    size += m_ScreenEdgeBuffer;</a>
<a class="sourceLine" id="cb3-22" data-line-number="22">    size = Mathf.<span class="fu">Max</span>(size, m_MinSize);</a>
<a class="sourceLine" id="cb3-23" data-line-number="23">    <span class="kw">return</span> size;</a>
<a class="sourceLine" id="cb3-24" data-line-number="24">}</a>
<a class="sourceLine" id="cb3-25" data-line-number="25"></a></code></pre></div>
<ul>
<li><code>InverseTransformPoint</code> : Transforms position from world space to local space.</li>
</ul>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_19-03-41.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/camera-control?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/camera-control?playlist=20081</a></li>
</ul>
</div>
<h1 id="tank-health">Tank Health</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-40-48.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-41-35.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-42-35.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-43-54.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-44-06.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-45-05.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-47-33.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-48-55.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-51-15.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-53-55.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-55-58.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_22-57-13.png" /></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">using</span> UnityEngine;</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">public</span> <span class="kw">class</span> UIDirectionControl : MonoBehaviour</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="kw">public</span> <span class="dt">bool</span> m_UseRelativeRotation = <span class="kw">true</span>;  </a>
<a class="sourceLine" id="cb4-6" data-line-number="6"></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    <span class="kw">private</span> Quaternion m_RelativeRotation;     </a>
<a class="sourceLine" id="cb4-9" data-line-number="9"></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">Start</span>()</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">    {</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">        m_RelativeRotation = transform.<span class="fu">parent</span>.<span class="fu">localRotation</span>;</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">    }</a>
<a class="sourceLine" id="cb4-15" data-line-number="15"></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">Update</span>()</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">    {</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">        <span class="kw">if</span> (m_UseRelativeRotation)</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">            transform.<span class="fu">rotation</span> = m_RelativeRotation;</a>
<a class="sourceLine" id="cb4-21" data-line-number="21">    }</a>
<a class="sourceLine" id="cb4-22" data-line-number="22">}</a></code></pre></div>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-00-21.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-01-26.png" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">using</span> UnityEngine;</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">using</span> UnityEngine.<span class="fu">UI</span>;</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">public</span> <span class="kw">class</span> TankHealth : MonoBehaviour</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">{</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="kw">public</span> <span class="dt">float</span> m_StartingHealth = 100f;</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">    <span class="kw">public</span> Slider m_Slider;</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">    <span class="kw">public</span> Image m_FillImage;</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">    <span class="kw">public</span> Color m_FullHealthColor = Color.<span class="fu">green</span>;</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="kw">public</span> Color m_ZeroHealthColor = Color.<span class="fu">red</span>;</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    <span class="kw">public</span> GameObject m_ExplosionPrefab;</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"></a>
<a class="sourceLine" id="cb5-13" data-line-number="13">    <span class="kw">private</span> AudioSource m_ExplosionAudio;</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">    <span class="kw">private</span> ParticleSystem m_ExplosionParticles;</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">    <span class="kw">private</span> <span class="dt">float</span> m_CurrentHealth;</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">    <span class="kw">private</span> <span class="dt">bool</span> m_Dead;</a>
<a class="sourceLine" id="cb5-17" data-line-number="17"></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"></a>
<a class="sourceLine" id="cb5-19" data-line-number="19">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">Awake</span>()</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">    {</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">        m_ExplosionParticles = <span class="fu">Instantiate</span>(m_ExplosionPrefab).<span class="fu">GetComponent</span>&lt;ParticleSystem&gt;();</a>
<a class="sourceLine" id="cb5-22" data-line-number="22">        m_ExplosionAudio = m_ExplosionParticles.<span class="fu">GetComponent</span>&lt;AudioSource&gt;();</a>
<a class="sourceLine" id="cb5-23" data-line-number="23"></a>
<a class="sourceLine" id="cb5-24" data-line-number="24">        m_ExplosionParticles.<span class="fu">gameObject</span>.<span class="fu">SetActive</span>(<span class="kw">false</span>);</a>
<a class="sourceLine" id="cb5-25" data-line-number="25">    }</a>
<a class="sourceLine" id="cb5-26" data-line-number="26"></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"></a>
<a class="sourceLine" id="cb5-28" data-line-number="28">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">OnEnable</span>()</a>
<a class="sourceLine" id="cb5-29" data-line-number="29">    {</a>
<a class="sourceLine" id="cb5-30" data-line-number="30">        m_CurrentHealth = m_StartingHealth;</a>
<a class="sourceLine" id="cb5-31" data-line-number="31">        m_Dead = <span class="kw">false</span>;</a>
<a class="sourceLine" id="cb5-32" data-line-number="32"></a>
<a class="sourceLine" id="cb5-33" data-line-number="33">        <span class="fu">SetHealthUI</span>();</a>
<a class="sourceLine" id="cb5-34" data-line-number="34">    }</a>
<a class="sourceLine" id="cb5-35" data-line-number="35"></a>
<a class="sourceLine" id="cb5-36" data-line-number="36">    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">TakeDamage</span>(<span class="dt">float</span> amount)</a>
<a class="sourceLine" id="cb5-37" data-line-number="37">    {</a>
<a class="sourceLine" id="cb5-38" data-line-number="38">        m_CurrentHealth -= amount;</a>
<a class="sourceLine" id="cb5-39" data-line-number="39"></a>
<a class="sourceLine" id="cb5-40" data-line-number="40">        <span class="fu">SetHealthUI</span> ();</a>
<a class="sourceLine" id="cb5-41" data-line-number="41"></a>
<a class="sourceLine" id="cb5-42" data-line-number="42">        <span class="kw">if</span> (m_CurrentHealth &lt;= 0f &amp;&amp; !m_Dead) {</a>
<a class="sourceLine" id="cb5-43" data-line-number="43">          <span class="fu">OnDeath</span> ();</a>
<a class="sourceLine" id="cb5-44" data-line-number="44">        }</a>
<a class="sourceLine" id="cb5-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb5-46" data-line-number="46"></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"></a>
<a class="sourceLine" id="cb5-48" data-line-number="48">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">SetHealthUI</span>()</a>
<a class="sourceLine" id="cb5-49" data-line-number="49">    {</a>
<a class="sourceLine" id="cb5-50" data-line-number="50">        m_Slider.<span class="fu">value</span> = m_CurrentHealth;</a>
<a class="sourceLine" id="cb5-51" data-line-number="51">        m_FillImage.<span class="fu">color</span> = Color.<span class="fu">Lerp</span> (m_ZeroHealthColor, m_FullHealthColor, m_CurrentHealth / m_StartingHealth);</a>
<a class="sourceLine" id="cb5-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb5-53" data-line-number="53"></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"></a>
<a class="sourceLine" id="cb5-55" data-line-number="55">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">OnDeath</span>()</a>
<a class="sourceLine" id="cb5-56" data-line-number="56">    {</a>
<a class="sourceLine" id="cb5-57" data-line-number="57">        m_Dead = <span class="kw">true</span>;</a>
<a class="sourceLine" id="cb5-58" data-line-number="58">        m_ExplosionParticles.<span class="fu">transform</span>.<span class="fu">position</span> = transform.<span class="fu">position</span>;</a>
<a class="sourceLine" id="cb5-59" data-line-number="59">        m_ExplosionParticles.<span class="fu">gameObject</span>.<span class="fu">SetActive</span> (<span class="kw">true</span>);</a>
<a class="sourceLine" id="cb5-60" data-line-number="60">        m_ExplosionParticles.<span class="fu">Play</span> ();</a>
<a class="sourceLine" id="cb5-61" data-line-number="61">        m_ExplosionAudio.<span class="fu">Play</span> ();</a>
<a class="sourceLine" id="cb5-62" data-line-number="62">        gameObject.<span class="fu">SetActive</span> (<span class="kw">false</span>);</a>
<a class="sourceLine" id="cb5-63" data-line-number="63">    }</a>
<a class="sourceLine" id="cb5-64" data-line-number="64">}</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/tank-health?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/tank-health?playlist=20081</a></li>
</ul>
</div>
<h1 id="shell-creation">Shell Creation</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-15-29.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-18-16.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-20-06.png" /></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">using</span> UnityEngine;</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">public</span> <span class="kw">class</span> ShellExplosion : MonoBehaviour</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">{</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">    <span class="kw">public</span> LayerMask m_TankMask;</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw">public</span> ParticleSystem m_ExplosionParticles;</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">    <span class="kw">public</span> AudioSource m_ExplosionAudio;</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    <span class="kw">public</span> <span class="dt">float</span> m_MaxDamage = 100f;</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    <span class="kw">public</span> <span class="dt">float</span> m_ExplosionForce = 1000f;</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    <span class="kw">public</span> <span class="dt">float</span> m_MaxLifeTime = 2f;</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">    <span class="kw">public</span> <span class="dt">float</span> m_ExplosionRadius = 5f;</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"></a>
<a class="sourceLine" id="cb6-14" data-line-number="14">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">Start</span>()</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">    {</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">        <span class="fu">Destroy</span>(gameObject, m_MaxLifeTime);</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">    }</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"></a>
<a class="sourceLine" id="cb6-20" data-line-number="20">    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">OnTriggerEnter</span>(Collider other)</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">    {</a>
<a class="sourceLine" id="cb6-22" data-line-number="22">        Collider[] colliders = Physics.<span class="fu">OverlapSphere</span> (transform.<span class="fu">position</span>, m_ExplosionRadius, m_TankMask);</a>
<a class="sourceLine" id="cb6-23" data-line-number="23"></a>
<a class="sourceLine" id="cb6-24" data-line-number="24">        <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; colliders.<span class="fu">Length</span>; i++)</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">        {</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">          Rigidbody targetRigidbody = colliders[i].<span class="fu">GetComponent</span>&lt;Rigidbody&gt; ();</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">          <span class="kw">if</span> (!targetRigidbody)</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">            <span class="kw">continue</span>;</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"></a>
<a class="sourceLine" id="cb6-30" data-line-number="30">          targetRigidbody.<span class="fu">AddExplosionForce</span> (m_ExplosionForce, transform.<span class="fu">position</span>, m_ExplosionRadius);</a>
<a class="sourceLine" id="cb6-31" data-line-number="31">          TankHealth targetHealth = targetRigidbody.<span class="fu">GetComponent</span>&lt;TankHealth&gt; ();</a>
<a class="sourceLine" id="cb6-32" data-line-number="32"></a>
<a class="sourceLine" id="cb6-33" data-line-number="33">          <span class="kw">if</span> (!targetHealth)</a>
<a class="sourceLine" id="cb6-34" data-line-number="34">            <span class="kw">continue</span>;</a>
<a class="sourceLine" id="cb6-35" data-line-number="35"></a>
<a class="sourceLine" id="cb6-36" data-line-number="36">          <span class="dt">float</span> damage = <span class="fu">CalculateDamage</span> (targetRigidbody.<span class="fu">position</span>);</a>
<a class="sourceLine" id="cb6-37" data-line-number="37">          targetHealth.<span class="fu">TakeDamage</span> (damage);</a>
<a class="sourceLine" id="cb6-38" data-line-number="38">        }</a>
<a class="sourceLine" id="cb6-39" data-line-number="39"></a>
<a class="sourceLine" id="cb6-40" data-line-number="40">        <span class="co">// Unparent because the shell is gonna be destoryed</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41">        m_ExplosionParticles.<span class="fu">transform</span>.<span class="fu">parent</span> = <span class="kw">null</span>;</a>
<a class="sourceLine" id="cb6-42" data-line-number="42">        m_ExplosionParticles.<span class="fu">Play</span>();</a>
<a class="sourceLine" id="cb6-43" data-line-number="43">        m_ExplosionAudio.<span class="fu">Play</span>();</a>
<a class="sourceLine" id="cb6-44" data-line-number="44"></a>
<a class="sourceLine" id="cb6-45" data-line-number="45">        <span class="co">// Once the particles have finished, destroy the gameobject they are on.</span></a>
<a class="sourceLine" id="cb6-46" data-line-number="46">        <span class="fu">Destroy</span> (m_ExplosionParticles.<span class="fu">gameObject</span>, m_ExplosionParticles.<span class="fu">duration</span>);</a>
<a class="sourceLine" id="cb6-47" data-line-number="47">        <span class="co">// Destroy Shell</span></a>
<a class="sourceLine" id="cb6-48" data-line-number="48">        <span class="fu">Destroy</span> (gameObject);</a>
<a class="sourceLine" id="cb6-49" data-line-number="49">    }</a>
<a class="sourceLine" id="cb6-50" data-line-number="50"></a>
<a class="sourceLine" id="cb6-51" data-line-number="51">    <span class="kw">private</span> <span class="dt">float</span> <span class="fu">CalculateDamage</span>(Vector3 targetPosition)</a>
<a class="sourceLine" id="cb6-52" data-line-number="52">    {</a>
<a class="sourceLine" id="cb6-53" data-line-number="53">        Vector3 explosionToTarget = targetPosition - transform.<span class="fu">position</span>;</a>
<a class="sourceLine" id="cb6-54" data-line-number="54">        <span class="dt">float</span> explosionDistance = explosionToTarget.<span class="fu">magnitude</span>;</a>
<a class="sourceLine" id="cb6-55" data-line-number="55">        <span class="dt">float</span> relativeDistance = (m_ExplosionRadius - explosionDistance) / m_ExplosionRadius;</a>
<a class="sourceLine" id="cb6-56" data-line-number="56">        <span class="dt">float</span> damage = relativeDistance * m_MaxDamage;</a>
<a class="sourceLine" id="cb6-57" data-line-number="57"></a>
<a class="sourceLine" id="cb6-58" data-line-number="58">        damage = Mathf.<span class="fu">Max</span> (0f, damage);</a>
<a class="sourceLine" id="cb6-59" data-line-number="59">        <span class="kw">return</span> damage;</a>
<a class="sourceLine" id="cb6-60" data-line-number="60">    }</a>
<a class="sourceLine" id="cb6-61" data-line-number="61">}</a></code></pre></div>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-30-53.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-33-14.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/shell-creation?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/shell-creation?playlist=20081</a></li>
</ul>
</div>
<h1 id="firing-shells">Firing Shells</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-36-56.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-38-07.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-39-17.png" /></p>
<ul>
<li>Click with <code>Alt</code> to fully open the hierarchy</li>
</ul>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-40-49.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-44-14.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-29_23-48-14.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_00-10-13.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/firing-shells?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/firing-shells?playlist=20081</a></li>
</ul>
</div>
<h1 id="game-managers">Game Managers</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-39-29.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-40-28.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-40-53.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-41-55.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-42-39.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-44-11.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-44-20.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-45-40.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-46-06.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-47-04.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-47-12.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-50-44.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-50-51.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-54-46.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-55-18.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-56-02.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-56-13.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-58-43.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-58-57.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_07-59-40.png" /></p>
<p>TankManager:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">Setup</span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    m_Movement = m_Instance.<span class="fu">GetComponent</span>&lt;TankMovement&gt;();</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">    m_Shooting = m_Instance.<span class="fu">GetComponent</span>&lt;TankShooting&gt;();</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">    m_CanvasGameObject = m_Instance.<span class="fu">GetComponentInChildren</span>&lt;Canvas&gt;().<span class="fu">gameObject</span>;</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    m_Movement.<span class="fu">m_PlayerNumber</span> = m_PlayerNumber;</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">    m_Shooting.<span class="fu">m_PlayerNumber</span> = m_PlayerNumber;</a>
<a class="sourceLine" id="cb7-9" data-line-number="9"></a>
<a class="sourceLine" id="cb7-10" data-line-number="10">    m_ColoredPlayerText = <span class="st">&quot;&lt;color=#&quot;</span> + ColorUtility.<span class="fu">ToHtmlStringRGB</span>(m_PlayerColor) + <span class="st">&quot;&gt;PLAYER &quot;</span> + m_PlayerNumber + <span class="st">&quot;&lt;/color&gt;&quot;</span>;</a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">    MeshRenderer[] renderers = m_Instance.<span class="fu">GetComponentsInChildren</span>&lt;MeshRenderer&gt;();</a>
<a class="sourceLine" id="cb7-13" data-line-number="13"></a>
<a class="sourceLine" id="cb7-14" data-line-number="14">    <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; renderers.<span class="fu">Length</span>; i++)</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">    {</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">        renderers[i].<span class="fu">material</span>.<span class="fu">color</span> = m_PlayerColor;</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">    }</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">}</a></code></pre></div>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-13-09.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-23-08.png" /></p>
<p>GameManager:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode csharp"><code class="sourceCode cs"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">private</span> <span class="dt">void</span> <span class="fu">Start</span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">    m_StartWait = <span class="kw">new</span> <span class="fu">WaitForSeconds</span>(m_StartDelay);</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">    m_EndWait = <span class="kw">new</span> <span class="fu">WaitForSeconds</span>(m_EndDelay);</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">    <span class="fu">SpawnAllTanks</span>();</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">    <span class="fu">SetCameraTargets</span>();</a>
<a class="sourceLine" id="cb8-8" data-line-number="8"></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">    <span class="fu">StartCoroutine</span>(<span class="fu">GameLoop</span>());</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="kw">private</span> IEnumerator <span class="fu">GameLoop</span>()</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">{</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">    <span class="kw">yield</span> <span class="kw">return</span> <span class="fu">StartCoroutine</span>(<span class="fu">RoundStarting</span>());</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">    <span class="kw">yield</span> <span class="kw">return</span> <span class="fu">StartCoroutine</span>(<span class="fu">RoundPlaying</span>());</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">    <span class="kw">yield</span> <span class="kw">return</span> <span class="fu">StartCoroutine</span>(<span class="fu">RoundEnding</span>());</a>
<a class="sourceLine" id="cb8-17" data-line-number="17"></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">    <span class="kw">if</span> (m_GameWinner != <span class="kw">null</span>)</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">    {</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">        Application.<span class="fu">LoadLevel</span> (Application.<span class="fu">loadedLevel</span>);</a>
<a class="sourceLine" id="cb8-21" data-line-number="21">    }</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23">    {</a>
<a class="sourceLine" id="cb8-24" data-line-number="24">        <span class="fu">StartCoroutine</span>(<span class="fu">GameLoop</span>());</a>
<a class="sourceLine" id="cb8-25" data-line-number="25">    }</a>
<a class="sourceLine" id="cb8-26" data-line-number="26">}</a>
<a class="sourceLine" id="cb8-27" data-line-number="27"></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="kw">private</span> IEnumerator <span class="fu">RoundStarting</span>()</a>
<a class="sourceLine" id="cb8-29" data-line-number="29">{</a>
<a class="sourceLine" id="cb8-30" data-line-number="30">    <span class="fu">ResetAllTanks</span> ();</a>
<a class="sourceLine" id="cb8-31" data-line-number="31">    <span class="fu">DisableTankControl</span> ();</a>
<a class="sourceLine" id="cb8-32" data-line-number="32">    m_CameraControl.<span class="fu">SetStartPositionAndSize</span> ();</a>
<a class="sourceLine" id="cb8-33" data-line-number="33"></a>
<a class="sourceLine" id="cb8-34" data-line-number="34">    m_RoundNumber += <span class="dv">1</span>;</a>
<a class="sourceLine" id="cb8-35" data-line-number="35">    m_MessageText.<span class="fu">text</span> = <span class="st">&quot;ROUND &quot;</span> + m_RoundNumber;</a>
<a class="sourceLine" id="cb8-36" data-line-number="36"></a>
<a class="sourceLine" id="cb8-37" data-line-number="37">    <span class="kw">yield</span> <span class="kw">return</span> m_StartWait;</a>
<a class="sourceLine" id="cb8-38" data-line-number="38">}</a>
<a class="sourceLine" id="cb8-39" data-line-number="39"></a>
<a class="sourceLine" id="cb8-40" data-line-number="40"><span class="kw">private</span> IEnumerator <span class="fu">RoundPlaying</span>()</a>
<a class="sourceLine" id="cb8-41" data-line-number="41">{</a>
<a class="sourceLine" id="cb8-42" data-line-number="42">    <span class="fu">EnableTankControl</span> ();</a>
<a class="sourceLine" id="cb8-43" data-line-number="43">    m_MessageText.<span class="fu">text</span> = <span class="dt">string</span>.<span class="fu">Empty</span>;</a>
<a class="sourceLine" id="cb8-44" data-line-number="44"></a>
<a class="sourceLine" id="cb8-45" data-line-number="45">    <span class="kw">while</span> (!<span class="fu">OneTankLeft</span> ()) {</a>
<a class="sourceLine" id="cb8-46" data-line-number="46">        <span class="kw">yield</span> <span class="kw">return</span> <span class="kw">null</span>;</a>
<a class="sourceLine" id="cb8-47" data-line-number="47">    }</a>
<a class="sourceLine" id="cb8-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb8-49" data-line-number="49"></a>
<a class="sourceLine" id="cb8-50" data-line-number="50"><span class="kw">private</span> IEnumerator <span class="fu">RoundEnding</span>()</a>
<a class="sourceLine" id="cb8-51" data-line-number="51">{</a>
<a class="sourceLine" id="cb8-52" data-line-number="52">    <span class="fu">DisableTankControl</span> ();</a>
<a class="sourceLine" id="cb8-53" data-line-number="53">    m_RoundWinner = <span class="kw">null</span>;</a>
<a class="sourceLine" id="cb8-54" data-line-number="54">    m_RoundWinner = <span class="fu">GetRoundWinner</span> ();</a>
<a class="sourceLine" id="cb8-55" data-line-number="55">    <span class="kw">if</span> (m_RoundWinner != <span class="kw">null</span>)</a>
<a class="sourceLine" id="cb8-56" data-line-number="56">        m_RoundWinner.<span class="fu">m_Wins</span>++;</a>
<a class="sourceLine" id="cb8-57" data-line-number="57"></a>
<a class="sourceLine" id="cb8-58" data-line-number="58">    m_GameWinner = <span class="fu">GetGameWinner</span> ();</a>
<a class="sourceLine" id="cb8-59" data-line-number="59"></a>
<a class="sourceLine" id="cb8-60" data-line-number="60">    <span class="dt">string</span> message = <span class="fu">EndMessage</span> ();</a>
<a class="sourceLine" id="cb8-61" data-line-number="61">    m_MessageText.<span class="fu">text</span> = message;</a>
<a class="sourceLine" id="cb8-62" data-line-number="62"></a>
<a class="sourceLine" id="cb8-63" data-line-number="63">    <span class="kw">yield</span> <span class="kw">return</span> m_EndWait;</a>
<a class="sourceLine" id="cb8-64" data-line-number="64">}</a></code></pre></div>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/game-managers?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/game-managers?playlist=20081</a></li>
</ul>
</div>
<h1 id="audio-mixing">Audio Mixing</h1>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-32-24.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-32-54.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-33-38.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-34-06.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-39-15.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-40-01.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-41-42.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-42-37.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-49-40.png" /></p>
<p><img src="https://media.yeonghoey.com/unity/tutorial-tanks/_img/screenshot_2017-04-30_08-50-47.png" /></p>
<div class="REFERENCES drawer">
<ul>
<li><a href="https://unity3d.com/learn/tutorials/projects/tanks-tutorial/audio-mixing?playlist=20081" class="uri">https://unity3d.com/learn/tutorials/projects/tanks-tutorial/audio-mixing?playlist=20081</a></li>
</ul>
</div>
</article>

</body>
</html>
